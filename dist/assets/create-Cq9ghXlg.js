import{_ as w,d as y,l as E,u as _,m as h,t as M,r as i,o as k,g as S,c as n,w as u,p as $,i as v,b as e,q as p}from"./index-n5cQwVAs.js";import{u as C}from"./use-menu-Csjr_HKk.js";import{u as x}from"./use-axios-B515G0bt.js";import{E as I,u as T}from"./use-erorrs-B2HZ3-Ki.js";const q=y({components:{ErrorMessage:I},setup(){const o=T(),s=E(()=>o.errors);C().onSelectedKeys(["admin-departments"]);const g=_(),m=h({code:"",description:""}),c=localStorage.getItem("accessToken"),a=x();c&&a.initializeAxios(c);const l=()=>{o.clearAllErrors(),a.axiosInstance.post("/departments/store",m).then(t=>{t.status==201&&(v.success(t.data.message),g.push({name:"admin-departments"}))}).catch(t=>{if(t.response&&t.response.data.errors){const d=t.response.data.errors;Object.keys(d).forEach(r=>{const b=d[r][0];o.setError(r,b)})}else v.error(t.response.data.message)})};return{...M(m),errors:s,createDepartmenst:l}}}),A={class:"row"},B={class:"col-12 col-sm-12"},j={class:"row mb-3"},z={class:"col-12 col-sm-3 text-start text-sm-end"},D={class:"col-12 col-sm-5"},N={class:"row mb-3"},P={class:"col-12 col-sm-3 text-start text-sm-end"},R={class:"col-12 col-sm-5"},U={class:"row"},V={class:"col-12 d-grid d-sm-flex justify-content-sm-end mx-auto"};function H(o,s,f,g,m,c){const a=i("a-input"),l=i("ErrorMessage"),t=i("a-button"),d=i("a-card");return k(),S("form",{onSubmit:s[3]||(s[3]=$(r=>o.createDepartmenst(),["prevent"]))},[n(d,{title:"Tạo mới tài khoản",style:{width:"100%"}},{default:u(()=>[e("div",A,[e("div",B,[e("div",j,[e("div",z,[e("label",null,[s[4]||(s[4]=e("span",{class:"text-danger me-1"},"*",-1)),e("span",{class:p({"text-danger":o.errors.code})}," Mã Phòng ban ",2)])]),e("div",D,[n(a,{required:"",placeholder:"Mã Phòng ban","allow-clear":"",value:o.code,"onUpdate:value":s[0]||(s[0]=r=>o.code=r),class:p({"input-danger":o.errors.code}),onInput:o.uppercaseCode},null,8,["value","class","onInput"]),s[5]||(s[5]=e("div",{class:"w-100"},null,-1)),n(l,{message:o.errors.code},null,8,["message"])])]),e("div",N,[e("div",P,[e("label",null,[s[6]||(s[6]=e("span",{class:"text-danger me-1"},"*",-1)),e("span",{class:p({"text-danger":o.errors.description})}," Tên phòng ban ",2)])]),e("div",R,[n(a,{placeholder:"Tên phòng ban","allow-clear":"",required:"",value:o.description,"onUpdate:value":s[1]||(s[1]=r=>o.description=r),class:p({"input-danger":o.errors.description})},null,8,["value","class"]),s[7]||(s[7]=e("div",{class:"w-100"},null,-1)),n(l,{message:o.errors.description},null,8,["message"])])])])]),e("div",U,[e("div",V,[n(t,{class:"me-0 me-sm-2 mb-2 mb-sm-0",type:"primary",danger:"",ghost:"",onClick:s[2]||(s[2]=r=>o.$router.push({name:"admin-deparments"}))},{default:u(()=>s[8]||(s[8]=[e("span",null,"Hủy",-1)])),_:1}),n(t,{type:"primary","html-type":"submit"},{default:u(()=>s[9]||(s[9]=[e("span",null,"Lưu",-1)])),_:1})])])]),_:1})],32)}const G=w(q,[["render",H]]);export{G as default};
