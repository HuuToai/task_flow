import{_ as y,d as w,u as E,y as _,m as C,p as M,q as $,t as k,r as p,o as S,g as x,c as n,w as g,v as I,i as q,b as e,n as c}from"./index-2PiHdJuC.js";import{u as A}from"./use-menu-rR8rP7ih.js";import{u as B}from"./use-axios-BjUjc9os.js";import{E as D,u as R}from"./use-erorrs-ZpWOnm9m.js";const T=w({components:{ErrorMessage:D},setup(){A().onSelectedKeys(["admin-departments"]);const s=E(),m=_(),d=R(),v=C(()=>d.errors),a=M({code:"",description:""}),l=localStorage.getItem("accessToken"),r=B();l&&r.initializeAxios(l);const i=async()=>{try{const o=await r.axiosInstance.get(`/departments/edit/${m.params.id}`);a.code=o.data.code,a.description=o.data.description}catch(o){console.error("Lỗi khi lấy phòng ban:",o)}},u=()=>{d.clearAllErrors(),r.axiosInstance.put(`/departments/update/${m.params.id}`,a).then(o=>{o.status==200&&(q.success("Cập nhật thành công"),s.push({name:"admin-departments"}))}).catch(o=>{const f=o.response.data.errors;Object.keys(f).forEach(b=>{const h=f[b][0];d.setError(b,h)})})};return $(()=>{i()}),{...k(a),errors:v,updateDepartment:u}}}),j={class:"row"},z={class:"col-12 col-sm-12"},N={class:"row mb-3"},P={class:"col-12 col-sm-3 text-start text-sm-end"},U={class:"col-12 col-sm-5"},V={class:"row mb-3"},H={class:"col-12 col-sm-3 text-start text-sm-end"},K={class:"col-12 col-sm-5"},L={class:"row"},O={class:"col-12 d-grid d-sm-flex justify-content-sm-end mx-auto"};function F(t,s,m,d,v,a){const l=p("a-input"),r=p("ErrorMessage"),i=p("a-button"),u=p("a-card");return S(),x("form",{onSubmit:s[3]||(s[3]=I(o=>t.updateDepartment(),["prevent"]))},[n(u,{title:"Cập nhật tài khoản",style:{width:"100%"}},{default:g(()=>[e("div",j,[e("div",z,[e("div",N,[e("div",P,[e("label",null,[s[4]||(s[4]=e("span",{class:"text-danger me-1"},"*",-1)),e("span",{class:c({"text-danger":t.errors.code})}," Mã Phòng ban ",2)])]),e("div",U,[n(l,{required:"",placeholder:"Mã Phòng ban","allow-clear":"",value:t.code,"onUpdate:value":s[0]||(s[0]=o=>t.code=o),class:c({"input-danger":t.errors.code}),onInput:t.uppercaseCode},null,8,["value","class","onInput"]),s[5]||(s[5]=e("div",{class:"w-100"},null,-1)),n(r,{message:t.errors.code},null,8,["message"])])]),e("div",V,[e("div",H,[e("label",null,[s[6]||(s[6]=e("span",{class:"text-danger me-1"},"*",-1)),e("span",{class:c({"text-danger":t.errors.description})}," Tên phòng ban ",2)])]),e("div",K,[n(l,{placeholder:"Tên phòng ban","allow-clear":"",required:"",value:t.description,"onUpdate:value":s[1]||(s[1]=o=>t.description=o),class:c({"input-danger":t.errors.description})},null,8,["value","class"]),s[7]||(s[7]=e("div",{class:"w-100"},null,-1)),n(r,{message:t.errors.description},null,8,["message"])])])])]),e("div",L,[e("div",O,[n(i,{class:"me-0 me-sm-2 mb-2 mb-sm-0",type:"primary",danger:"",ghost:"",onClick:s[2]||(s[2]=o=>t.$router.push({name:"admin-despartments"}))},{default:g(()=>s[8]||(s[8]=[e("span",null,"Hủy",-1)])),_:1}),n(i,{type:"primary","html-type":"submit"},{default:g(()=>s[9]||(s[9]=[e("span",null,"Cập nhật",-1)])),_:1})])])]),_:1})],32)}const X=y(T,[["render",F]]);export{X as default};
