import{u as v}from"./use-menu-rR8rP7ih.js";import{u as I}from"./use-axios-BjUjc9os.js";import{_ as T,d as C,f as S,r as _,o as n,a as $,w as s,b as a,c as o,g as l,x as w,j as p,F as h,i as x}from"./index-2PiHdJuC.js";import{M as B}from"./index-D70LART2.js";const M=C({created(){localStorage.getItem("accessToken")||this.$router.push({name:"admin-login"})},setup(){v().onSelectedKeys(["admin-users"]);const t=S([]),g=[{title:"#",key:"index"},{title:"Mã nhân viên",key:"employee_code",dataIndex:"employee_code"},{title:"Tài khoản",dataIndex:"name",key:"name"},{title:"email",dataIndex:"email",key:"email"},{title:"Thêm bởi",dataIndex:"created_by_name",key:"created_by_name"},{title:"Trạng thái tài khoản",key:"is_active"},{title:"Phòng ban",dataIndex:"name_department",key:"name_department"},{title:"Công cụ",key:"action",fixed:"right"}],d=I(),y=localStorage.getItem("accessToken");y&&d.initializeAxios(y);const k=async()=>{try{const e=await d.axiosInstance.get("/users");t.value=e.data,console.log(e)}catch(e){console.log(e)}},m=e=>{d.axiosInstance.delete(`/users/delete/${e}`).then(c=>{c.status===200&&(x.success("Xóa người dùng thành công"),k())}).catch(c=>{console.log(c),x.error("Xóa người dùng thất bại")})},r=e=>{B.confirm({title:"Bạn có chắc chắn muốn xóa người dùng này?",okText:"Xóa",okType:"danger",cancelText:"Hủy",onOk:()=>{m(e)}})};return k(),{users:t,columns:g,confirmDelete:r}}}),D={class:"row mb-3"},N={class:"col-12 justify-content-end d-flex"},V={class:"row"},X={class:"col-12"},j={key:0},A={key:0,class:"text-primary"},F={key:1,class:"text-danger"};function K(i,t,g,d,y,k){const m=_("router-link"),r=_("a-button"),e=_("a-table"),c=_("a-card");return n(),$(c,{title:"Tài khoản",style:{width:"100%"}},{default:s(()=>[a("div",D,[a("div",N,[o(r,{type:"primary"},{default:s(()=>[o(m,{to:{name:"users-register"}},{default:s(()=>t[0]||(t[0]=[a("i",{class:"fa-solid fa-user-plus"},null,-1)])),_:1})]),_:1})])]),a("div",V,[a("div",X,[o(e,{dataSource:i.users,columns:i.columns,scroll:{x:576}},{bodyCell:s(({column:f,index:b,record:u})=>[f.key==="index"?(n(),l("span",j,w(b+1),1)):p("",!0),f.key==="is_active"?(n(),l(h,{key:1},[u.is_active==1?(n(),l("span",A," Kích hoạt ")):u.is_active!==1?(n(),l("span",F," Bị khóa ")):p("",!0)],64)):p("",!0),f.key==="action"?(n(),l(h,{key:2},[o(m,{to:{name:"admin-users-edit",params:{id:u.id}}},{default:s(()=>[o(r,{type:"primary",class:"me-sm-2 mb-2 mb-sm-0"},{default:s(()=>t[1]||(t[1]=[a("i",{class:"fa-regular fa-pen-to-square"},null,-1)])),_:1})]),_:2},1032,["to"]),o(r,{type:"primary",danger:"",onClick:U=>i.confirmDelete(u.id)},{default:s(()=>t[2]||(t[2]=[a("i",{class:"fa-solid fa-trash"},null,-1)])),_:2},1032,["onClick"])],64)):p("",!0)]),_:1},8,["dataSource","columns"])])])]),_:1})}const O=T(M,[["render",K]]);export{O as default};
